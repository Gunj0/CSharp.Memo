# 初期設定

## POCO クラスを定義する

```cs
public class Book()
{
  public Title { get; set; }
}
```

## DbContext を継承したクラスを定義し、POCO クラスの DbSet を定義する

```cs
public class MyDbContext() : DbContext
{
  public MyDbContext(DbContextOptions<SampleDbContext> options)
    : base(options)
  {
  }

  public DbSet<Book> Books { get; set; }
}
```

## 接続文字列を appsettings.json 等に定義する

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Data Source=./Models/Database/Sample.sqlite"
  }
}
```

## Program.cs で DbContext と接続文字列を読み込む

```cs
var builder = WebApplication.CreateBuilder(args);
builder.Services.AddDbContext<SampleDbContext>(options =>
    options.UseSqlite(
        builder.Configuration.GetConnectionString("DefaultConnection")
    )
);
var app = builder.Build();
```

## マイグレーション

```bash
# マイグレーションファイルの追加
dotnet ef migrations add InitialMigration
# DBへの反映
dotnet ef database update
```
